\section{Les repos de \git{}}

2 scÃ©narios courants :

\begin{enumerate}
\item  crÃ©er un nouveau dÃ©pÃ´t Git (repo)
\item  crÃ©er un projet qui utilise ce repo (local + serveur)
\end{enumerate}

\subsection{CrÃ©er un nouveau dÃ©pÃ´t \git{}}

\begin{enumerate}
\item  Repo local (le plus simple)

Ã€ utiliser si tu travailles seul ou avant de pousser vers un serveur.

\begin{lstlisting}
mkdir mon-projet
cd mon-projet
git init
\end{lstlisting}

RÃ©sultat :

Un dossier \lstinline{.git/} est crÃ©Ã©

Ton projet est maintenant un repo \git{}.

VÃ©rifie :

git status

\item Repo serveur (bare) (nÃ©cessaire pour partage)

Un repo bare sert uniquement Ã  recevoir des push.

\begin{lstlisting}
mkdir mon-projet.git
cd mon-projet.git
git init --bare
\end{lstlisting}

Important : Pas de fichiers de code ici. Uniquement pour push / pull
\end{enumerate}

\subsection{ CrÃ©er un projet qui utilise ce repo}

\begin{enumerate}

\item  Projet local \ra{} push vers serveur
Ã‰tape 1 : crÃ©er le projet

\begin{lstlisting}
mkdir mon-projet
cd mon-projet
git init
\end{lstlisting}



Ajoute un fichier :

\begin{lstlisting}
echo "# Mon projet" > README.md
git add .
git commit -m "Initial commit"
\end{lstlisting}

\begin{lstlisting}
git branch -m master main
\end{lstlisting}

Ã‰tape 2 : lier au repo distant
\begin{lstlisting}
git remote add origin ssh://user@serveur/chemin/mon-projet.git
\end{lstlisting}


VÃ©rifie :
\begin{lstlisting}
git remote -v
\end{lstlisting}

Ã‰tape 3 : crÃ©er la branche principale et pousser

\begin{lstlisting}
git branch -M main
git push -u origin main
\end{lstlisting}


 Le projet utilise maintenant le repo distant

\item  Projet depuis un repo existant (clone)

\begin{lstlisting}
git clone ssh://user@serveur/chemin/mon-projet.git
cd mon-projet
\end{lstlisting}

\end{enumerate}


Tu peux commencer Ã  coder directement

\subsection{Cycle de travail Git (quotidien)}

\begin{lstlisting}
git status
git add .
git commit -m "Description du changement"
git push
\end{lstlisting}


Pour rÃ©cupÃ©rer les changements :

\begin{lstlisting}
git pull
\end{lstlisting}

\subsection{Cas particulier : repo bare sans branche}

Si aprÃ¨s clone tu vois aucune branche :

\begin{lstlisting}
git branch -M main
git push -u origin main
\end{lstlisting}

Ou vÃ©rifie :

\begin{lstlisting}
git symbolic-ref HEAD refs/heads/main
\end{lstlisting}

RÃ©sumÃ© rapide 
Action	Commande
CrÃ©er repo local	git init
CrÃ©er repo serveur	git init --bare
Lier repo distant	git remote add origin ...
Premier push	git push -u origin main
Cloner un repo	git clone ...

Si tu veux, je peux ensuite :

te montrer exactement la mÃªme chose dans Eclipse

expliquer Git + Gradle

ou faire un schÃ©ma visuel du flux Git


Voici la procÃ©dure correcte et complÃ¨te pour renommer la branche master en main, sans erreur, dans ton contexte (repo bare + SSH + multi-users).

\subsection{Renommer la branche locale}

Sur ta machine cliente :

\begin{lstlisting}
git branch -m master main
\end{lstlisting}

VÃ©rifier :
\begin{lstlisting}
git branch
\end{lstlisting}

tu dois voir  \lstinline{* main}

\subsection{Pousser main vers le serveur}
git push -u origin main

\subsection{DÃ©finir main comme branche par dÃ©faut (OBLIGATOIRE)}

Sur le serveur, dans le repo bare :

\begin{lstlisting}
cd /Users/git/reposGit/mp.git
git symbolic-ref HEAD refs/heads/main
\end{lstlisting}

VÃ©rifier :

cat HEAD


RÃ©sultat attendu :

ref: refs/heads/main

4ï¸âƒ£ Supprimer lâ€™ancienne branche master (optionnel mais propre)

âš ï¸ uniquement si plus personne ne lâ€™utilise :

git push origin --delete master

5ï¸âƒ£ Mettre Ã  jour les autres clients (si existants)

Sur chaque machine :

git fetch origin
git branch -m master main
git branch -u origin/main main
git remote set-head origin -a

âœ… VÃ©rifications finales
git branch -a
git remote show origin


Tu dois voir :

branche locale : main

distante : origin/main

HEAD â†’ main

ğŸ§  Cas particuliers
ğŸ”´ Eclipse ne montre aucune branche

â¡ï¸ Ã‰tape 3 non faite

ğŸ”´ Repo bare sans commits

â¡ï¸ Fais dâ€™abord un commit :

echo init > README.md
git add README.md
git commit -m "init"
git push origin master


Puis recommence la procÃ©dure.

ğŸŸ¢ Pour tous les futurs repos
git config --global init.defaultBranch main

âœ”ï¸ RÃ©sumÃ© ultra-court
git branch -m master main
git push -u origin main
cd mp.git && git symbolic-ref HEAD refs/heads/main
git push origin --delete master


